<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FitnesAplikacija.PracenjeSna"
             Title="Praćenje Sna"
             NavigationPage.HasNavigationBar="False">

    <Grid>
        <Image Source="pozadinapracenjesna.png"
               Aspect="AspectFill"
               HorizontalOptions="Fill"
               VerticalOptions="Fill"
               Opacity="0.6" />

        <ScrollView>
            <VerticalStackLayout Padding="20" Spacing="20">

                <Label Text="Praćenje sna" 
                       FontSize="28"
                       TextColor="White"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       Margin="0,40,0,10"/>

                <Label Text="Unesite vrijeme spavanja i buđenja:"
                       Margin="0,0,0,30"
                       FontSize="16"
                       TextColor="White"
                       HorizontalTextAlignment="Center"/>

                <VerticalStackLayout HorizontalOptions="Center" >
                    <Label Text="Vrijeme spavanja" TextColor="White" Margin="18"/>
                    <TimePicker x:Name="SleepTimePicker" WidthRequest="360"  />
                </VerticalStackLayout>

                <VerticalStackLayout HorizontalOptions="Center" >
                    <Label Text="Vrijeme buđenja" TextColor="White" Margin="18"/>
                    <TimePicker x:Name="WakeTimePicker" WidthRequest="360" />
                </VerticalStackLayout>

                <Label Text="Ocjena kvaliteta sna (1–5)"  TextColor="White" HorizontalOptions="Center"  Margin="0,0,0,20"  />
                <Picker x:Name="SleepQualityPicker" Title="Izaberite ocjenu" WidthRequest="300" >
                    <Picker.ItemsSource>
                        <x:Array Type="{x:Type x:Int32}">
                            <x:Int32>1</x:Int32>
                            <x:Int32>2</x:Int32>
                            <x:Int32>3</x:Int32>
                            <x:Int32>4</x:Int32>
                            <x:Int32>5</x:Int32>
                        </x:Array>
                    </Picker.ItemsSource>
                </Picker>

                <Button Text="Sačuvaj san" 
                        BackgroundColor="#321259" 
                        TextColor="White"
                        HeightRequest="60"
                        FontSize="18"
                        WidthRequest="255"
                        CornerRadius="40"
                        Clicked="OnSaveSleepData"/>

                <Label x:Name="ResultLabel" 
                       TextColor="White" 
                       FontAttributes="Bold"
                       HorizontalTextAlignment="Center"
                       FontSize="14"/>

                <Label Text="Historija sna" 
                       FontSize="20" 
                       FontAttributes="Bold" 
                       TextColor="White" 
                       Margin="0,0,0,5"/>

                <CollectionView x:Name="SleepHistoryView"
                                HeightRequest="250">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BackgroundColor="#b38dd9" WidthRequest="360" CornerRadius="10" Padding="10" Margin="5">
                                <VerticalStackLayout>
                                    <Label Text="{Binding Date}"  FontAttributes="Bold" FontSize="20" TextColor="Black"/>
                                    <Label Text="{Binding Duration}" TextColor="White" FontSize="17" />
                                    <Label Text="{Binding Quality}" TextColor="White" FontSize="17"/>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
